{% extends 'base.html' %}

{% block title %}Dashboard - SimuladoApp{% endblock %}

{% block content %}
<style>
    /* Estilos específicos para a página de Dashboard */
    .dashboard-card .card-title {
        display: flex;
        align-items: center;
        font-size: 1.3rem;
        margin-bottom: 0.75rem; /* Espaçamento do título reduzido */
    }

    .dashboard-card .card-title i {
        margin-right: 0.75rem;
        font-size: 1.2em;
        color: var(--color-primary);
        vertical-align: middle;
    }

    /* Card de Estatísticas */
    .stat-box {
        padding: 0.5rem; /* Espaçamento interno mais reduzido */
        text-align: center;
    }

    .stat-box h3 {
        font-family: var(--font-title);
        font-size: 3rem; /* Fonte dos números reduzida */
        color: var(--text-light);
        letter-spacing: 2px;
        margin-bottom: 0;
    }

    .stat-box p {
        color: var(--text-muted);
        font-size: 0.9rem; /* Fonte do parágrafo ligeiramente reduzida */
        font-weight: 500;
        margin-top: -5px;
    }

    /* Card de Ações Rápidas */
    .action-card .btn i {
        margin-right: 0.5rem;
    }

    /* Hover dos botões sem brilho */
    .action-card .btn-primary:hover {
        box-shadow: none;
        transform: translateY(-3px);
    }

    .action-card .btn-secondary:hover {
        color: var(--text-light);
        background-color: var(--color-primary);
        border-color: var(--color-primary);
        transform: translateY(-3px);
        box-shadow: none;
    }


    /* Listas nos Cards */
    .list-card .list-group {
        border-top: 1px solid var(--border-color);
        margin-top: 0.5rem; /* Espaçamento acima da lista reduzido */
        padding-top: 0;
    }

    .list-card .list-group-item {
        background-color: transparent !important;
        color: var(--text-muted) !important;
        border-bottom: 1px solid var(--border-color) !important;
        padding: 0.6rem 0.5rem; /* Espaçamento vertical do item mais reduzido */
    }

    .list-card .list-group-item:last-child {
        border-bottom: none !important;
    }

    .list-card .list-group-item span {
        color: var(--text-light);
        font-weight: 500;
    }

    /* Botões pequenos de ação na lista */
    .btn-action-icon {
        background: transparent;
        border: 1px solid var(--border-color);
        color: var(--text-muted);
        padding: 0.3rem 0.6rem;
        border-radius: 4px;
        transition: all 0.2s ease-in-out;
    }

    .btn-action-icon:hover {
        color: var(--bg-dark);
        background: var(--color-primary);
        border-color: var(--color-primary);
        transform: scale(1.1);
    }

    .empty-list-message {
        color: var(--text-muted);
    }
</style>

<div class="row">
    <div class="col-lg-6 mb-4">
        <div class="card dashboard-card h-100">
            <div class="card-body d-flex flex-column">
                <h5 class="card-title">
                    <i class="bi bi-graph-up-arrow"></i> Estatísticas
                </h5>
                <div class="row my-auto">
                    <div class="col-6">
                        <div class="stat-box">
                            <h3>{{ total_questoes }}</h3>
                            <p>Questões</p>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="stat-box">
                            <h3>{{ total_simulados }}</h3>
                            <p>Simulados</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-6 mb-4">
        <div class="card dashboard-card action-card h-100">
            <div class="card-body d-flex flex-column">
                <h5 class="card-title">
                    <i class="bi bi-lightning-charge-fill"></i> Ações Rápidas
                </h5>
                <div class="d-grid gap-2 my-auto">
                    <a href="{% url 'questions:questao_create' %}" class="btn btn-primary">
                        <i class="bi bi-plus-circle"></i> Nova Questão
                    </a>
                    <a href="{% url 'questions:simulado_create' %}" class="btn btn-secondary">
                        <i class="bi bi-file-earmark-plus"></i> Novo Simulado
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6 mb-4">
        <div class="card dashboard-card list-card">
            <div class="card-body">
                <h5 class="card-title">
                    <i class="bi bi-clock-history"></i> Últimas Questões
                </h5>
                {% if ultimas_questoes %}
                    <ul class="list-group list-group-flush">
                        {% for questao in ultimas_questoes %}
                            <li class="list-group-item">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span>{{ questao.disciplina }} - {{ questao.conteudo|truncatechars:30 }}</span>
                                    <a href="{% url 'questions:questao_update' questao.pk %}" class="btn btn-sm btn-action-icon">
                                        <i class="bi bi-pencil"></i>
                                    </a>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p class="text-center mt-3 empty-list-message">Nenhuma questão cadastrada ainda.</p>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="col-md-6 mb-4">
        <div class="card dashboard-card list-card">
            <div class="card-body">
                <h5 class="card-title">
                    <i class="bi bi-collection"></i> Últimos Simulados
                </h5>
                {% if ultimos_simulados %}
                    <ul class="list-group list-group-flush">
                        {% for simulado in ultimos_simulados %}
                            <li class="list-group-item">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span>{{ simulado.titulo|truncatechars:25 }}</span>
                                    <div>
                                        <a href="{% url 'questions:simulado_edit' simulado.pk %}" class="btn btn-sm btn-action-icon me-2">
                                            <i class="bi bi-pencil"></i>
                                        </a>
                                         <a href="{% url 'questions:progresso_pdf' pk=simulado.pk %}" class="btn btn-sm btn-action-icon">
                                            <i class="bi bi-file-pdf"></i>
                                        </a>
                                    </div>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p class="text-center mt-3 empty-list-message">Nenhum simulado criado ainda.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}